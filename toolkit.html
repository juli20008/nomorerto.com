<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Negotiation Toolkit - NoMoreRTO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
            color: #000000;
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translate3d(0, 20px, 0); }
            to { opacity: 1; transform: translate3d(0, 0, 0); }
        }
        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease-out forwards;
        }
        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }
    </style>
</head>
<body class="min-h-screen w-full flex flex-col items-center py-8 px-4 relative overflow-x-hidden">

    <!-- Background Gradient -->
    <div class="fixed inset-0 z-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-gray-50 via-white to-white pointer-events-none"></div>

    <!-- Main Container -->
    <div class="w-full max-w-4xl flex flex-col items-center z-10 flex-grow">
        
        <!-- Header -->
        <header class="w-full flex justify-between items-center mb-8">
            <a href="index.html" class="font-bold text-2xl tracking-tighter select-none cursor-pointer no-underline">
                <span class="text-gray-900">NoMore</span><span class="text-red-600">RTO</span><span class="text-gray-400 text-lg">.com</span>
            </a>
            <button id="lang-toggle" class="flex items-center gap-2 px-3 py-1.5 rounded-full bg-gray-100 border border-gray-200 hover:border-gray-400 hover:bg-gray-200 transition-all text-sm font-medium text-gray-600 hover:text-gray-900 cursor-pointer">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/>
                </svg>
                <span id="lang-label">CN</span>
            </button>
        </header>

        <!-- TOOLKIT CONTENT -->
        <div class="w-full flex flex-col gap-10 animate-fade-in-up">
            <div class="w-full mx-auto">
                <a href="index.html" class="inline-flex items-center text-gray-500 hover:text-black mb-4 font-medium transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="m15 18-6-6 6-6"/></svg>
                    <span id="tk-back">Back to Home</span>
                </a>
                <h1 id="tk-title" class="text-3xl md:text-5xl font-extrabold tracking-tight mb-4 text-gray-900">Negotiation Toolkit</h1>
                <p id="tk-subtitle" class="text-gray-600 text-lg md:text-xl">Arm yourself with data, arguments, and templates.</p>
            </div>

            <!-- 1. Email Generator -->
            <div class="bg-white border-2 border-blue-100 rounded-xl shadow-lg p-6 md:p-8">
                <div class="flex items-center gap-3 mb-6">
                    <div class="p-2 bg-blue-600 rounded-lg text-white">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                    </div>
                    <div>
                        <h2 id="gen-title" class="text-xl md:text-2xl font-bold text-gray-900">RTO Refusal Generator</h2>
                        <p id="gen-desc" class="text-sm text-blue-600 font-semibold uppercase">AI-Powered / Copy & Paste</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                    <!-- Reason Select -->
                    <div>
                        <label id="lbl-reason" class="block text-sm font-medium text-gray-700 mb-1">Reason</label>
                        <select id="sel-reason" class="w-full p-2.5 bg-gray-50 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                            <option value="cost">Financial Hardship (Inflation)</option>
                            <option value="productivity">Productivity & Focus</option>
                            <option value="care">Child/Elder Care</option>
                            <option value="health">Health & Safety</option>
                        </select>
                    </div>
                    <!-- Tone Select -->
                    <div>
                        <label id="lbl-tone" class="block text-sm font-medium text-gray-700 mb-1">Tone</label>
                        <select id="sel-tone" class="w-full p-2.5 bg-gray-50 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                            <option value="polite">Polite & Professional</option>
                            <option value="firm">Firm & Direct</option>
                            <option value="passive">Passive Aggressive</option>
                        </select>
                    </div>
                </div>

                <button id="btn-generate" class="w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-lg transition-colors mb-6 shadow-md flex justify-center items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                    <span id="txt-generate">Generate Email</span>
                </button>

                <div class="relative">
                    <textarea id="output-email" rows="8" class="font-mono text-sm w-full p-4 bg-gray-50 border border-gray-200 rounded-lg text-gray-800 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500" readonly>Select your options above and click generate...</textarea>
                    <button id="btn-copy" class="absolute top-2 right-2 p-2 text-gray-400 hover:text-blue-600 transition-colors bg-white rounded-md border border-gray-200 hover:border-blue-500 shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                    </button>
                </div>
            </div>

            <!-- 2. The 'NO' Database -->
            <div class="bg-white border-2 border-gray-100 rounded-xl shadow-sm p-6 md:p-8 mb-12">
                <div class="mb-6">
                    <h2 id="db-title" class="text-xl md:text-2xl font-bold text-gray-900">The 'No' Database</h2>
                    <p id="db-subtitle" class="text-gray-600">Data-backed arguments to use in your next 1:1.</p>
                </div>
                
                <div id="accordion-container" class="space-y-4">
                    <!-- JS Injected Accordions -->
                </div>
            </div>

        </div>

        <!-- Footer -->
        <footer class="mt-auto text-center pb-8">
            <p id="footer-text" class="text-gray-400 text-xs uppercase tracking-widest">
                <!-- Content injected via JS -->
            </p>
        </footer>
    </div>

    <!-- JavaScript Application Logic -->
    <script>
        // --- Content & Translations ---
        const CONTENT = {
            en: {
                langBtnLabel: "CN",
                back: "Back to Home",
                title: "Negotiation Toolkit",
                subtitle: "Arm yourself with data, arguments, and templates.",
                footer: "© 2024 NoMoreRTO. Built for the Resistance.",
                generator: {
                    title: "RTO Refusal Generator",
                    desc: "AI-Powered / Copy & Paste",
                    lblReason: "Reason",
                    lblTone: "Tone",
                    btnText: "Generate Email",
                    reasons: [
                        {val: 'cost', text: 'Financial Hardship'},
                        {val: 'productivity', text: 'Productivity & Focus'},
                        {val: 'care', text: 'Child/Elder Care'},
                        {val: 'health', text: 'Health & Safety'}
                    ],
                    tones: [
                        {val: 'polite', text: 'Polite & Professional'},
                        {val: 'firm', text: 'Firm & Direct'},
                        {val: 'passive', text: 'Passive Aggressive'}
                    ]
                },
                database: {
                    title: "The 'No' Database",
                    subtitle: "Data-backed arguments to use in your next 1:1.",
                    items: [
                        {
                            title: "1. Pre-Existing Arrangement",
                            body: "This arrangement was pre-established, under which I have consistently maintained productivity, clear communication, and reliable results. The current setup has proven effective and aligned with both team and organizational needs. The established rhythm of remote collaboration continues to strengthen efficiency and ensure seamless coordination."
                        },
                        {
                            title: "2. Alignment with Organizational Goals",
                            body: "RTO does not directly contribute to achieving my position goals or advancing our organizational objectives. My work is primarily digital and outcome-based, making remote work a more efficient model. The quiet environment of my home office allows for deeper focus, accuracy, and timeliness, supporting the team better than a distracting office environment."
                        },
                        {
                            title: "3. Economic and Time Efficiency",
                            body: "Commuting introduces unnecessary cost and time loss—typically 3 to 4 hours daily—that adds no measurable value to my deliverables. Remote work eliminates these inefficiencies, allowing me to reinvest that time and energy into producing higher-quality outputs and meeting deadlines promptly."
                        },
                        {
                            title: "4. Health and Well-Being",
                            body: "Remote work supports both my physical and mental well-being by allowing me to manage my environment and schedule in a sustainable, balanced way. This flexibility enhances focus, reduces stress, and sustains long-term productivity, leading to improved consistency and fewer absences."
                        },
                        {
                            title: "5. Fairness and Workload Consideration",
                            body: "Given current staffing levels and heavy workload demands, many employees are operating under pressure with limited compensation adjustments. Continuing to work remotely helps offset these pressures by improving efficiency, supporting work-life balance, and sustaining engagement and morale."
                        },
                        {
                            title: "6. Support for Learning and Development",
                            body: "The time saved through remote work is reinvested into professional development and upskilling. I dedicate this time to technical learning that directly enhances my capabilities, enabling me to deliver greater value to the organization."
                        },
                        {
                            title: "7. Stronger Focus and Fewer Distractions",
                            body: "The home office provides a quiet, controlled environment that minimizes interruptions common in open office settings. This focused atmosphere allows for deeper analytical thinking, complex problem-solving, and high-precision work, which are essential to the success of my role."
                        },
                        {
                            title: "8. Enhanced Collaboration Through Digital Tools",
                            body: "Modern tools (Teams, SharePoint, etc.) have significantly enhanced virtual collaboration. Features like live captioning improve clarity and inclusivity. Remote collaboration encourages structured communication and transparent documentation, often resulting in smoother teamwork than traditional interactions."
                        },
                        {
                            title: "9. Business Continuity and Risk Management",
                            body: "A remote-ready structure enhances organizational resilience and ensures uninterrupted operations during disruptions such as severe weather or transit delays. Maintaining an established home office setup minimizes downtime and safeguards deliverables under any condition."
                        },
                        {
                            title: "10. Talent Retention and Organizational Reputation",
                            body: "Supporting flexible, results-based work models strengthens the employer brand and helps retain high-performing employees. Flexibility is a key factor in workforce satisfaction. Continuing to support remote work demonstrates trust and adaptability, aligning with long-term goals of engagement and retention."
                        }
                    ]
                }
            },
            cn: {
                langBtnLabel: "EN",
                back: "返回首页",
                title: "谈判与话术工具箱",
                subtitle: "用数据、逻辑和模板武装自己。",
                footer: "© 2024 NoMoreRTO. 为反抗而生。",
                generator: {
                    title: "回怼邮件生成器",
                    desc: "智能生成 / 复制即用",
                    lblReason: "拒绝理由",
                    lblTone: "语气",
                    btnText: "生成邮件",
                    reasons: [
                        {val: 'cost', text: '经济压力 (穷)'},
                        {val: 'productivity', text: '工作效率 (吵)'},
                        {val: 'care', text: '家庭照顾 (忙)'},
                        {val: 'health', text: '健康安全 (怕)'}
                    ],
                    tones: [
                        {val: 'polite', text: '礼貌职场风'},
                        {val: 'firm', text: '强硬直接风'},
                        {val: 'passive', text: '阴阳怪气风'}
                    ]
                },
                database: {
                    title: "拒绝理由数据库",
                    subtitle: "下次 1:1 面谈时可以直接甩出的数据和论点。",
                    items: [
                        {
                            title: "1. 既定安排的有效性",
                            body: "这种远程安排是既定的，在此期间我一直保持高效产出和可靠结果。目前的模式已被证明有效，符合团队和组织需求。既定的远程协作节奏能持续加强效率，并确保跨项目的无缝协调。"
                        },
                        {
                            title: "2. 与组织目标的一致性",
                            body: "强制返岗对我达成岗位目标或推动组织目标并无直接帮助。我的工作主要是数字化的、结果导向的，远程工作是更高效的模式。安静的居家环境能提升专注度、准确性和及时性，比干扰不断的办公室环境更能支持团队。"
                        },
                        {
                            title: "3. 经济成本与时间效率",
                            body: "通勤带来了不必要的成本和每天3-4小时的时间损失，且对我的交付成果没有任何可衡量的价值。远程工作消除了这些低效，让我能将精力重新投入到产生更高质量的产出和按时交付任务中。"
                        },
                        {
                            title: "4. 身心健康与工作平衡",
                            body: "远程工作支持我的身心健康，允许我以可持续、平衡的方式管理环境和日程。这种灵活性增强了专注力，减轻了压力，并维持了长期的生产力，从而提高工作的一致性并减少缺勤。"
                        },
                        {
                            title: "5. 公平性与工作量考量",
                            body: "考虑到目前的人员配置和繁重的工作量要求，许多员工（包括我自己）都在高压下工作，且薪资调整有限。继续远程工作有助于通过提高效率、支持工作与生活的平衡以及维持参与度和士气来抵消这些压力。"
                        },
                        {
                            title: "6. 支持持续学习与发展",
                            body: "省下的通勤时间被重新投资于职业发展和技能提升。我利用这些时间进行能直接增强我业务能力的学习，从而现在和未来都能为组织提供更大的价值。"
                        },
                        {
                            title: "7. 深度专注与减少干扰",
                            body: "家庭办公室提供了一个安静、可控的环境，最大限度地减少了开放式办公室设置中常见的干扰。这种专注的氛围允许进行深度分析思考、复杂问题解决和高精度工作，这对我的角色成功至关重要。"
                        },
                        {
                            title: "8. 数字化协作与包容性",
                            body: "现代工具（Teams, SharePoint等）显著增强了虚拟协作。实时字幕等功能通过减少歧义提高了清晰度和包容性（特别是对于非母语员工）。远程协作鼓励结构化沟通和透明的文档记录，通常比传统的面对面互动更顺畅。"
                        },
                        {
                            title: "9. 业务连续性与抗风险能力",
                            body: "远程就绪的结构增强了组织的弹性，并确保在恶劣天气或交通延误等意外中断期间业务不中断。保持既定的家庭办公设置能最大限度地减少停机时间，保障在任何条件下都能交付成果。"
                        },
                        {
                            title: "10. 人才留存与企业形象",
                            body: "支持灵活的、基于结果的工作模式能增强雇主品牌，并有助于留住高绩效员工。灵活性是员工满意度的关键因素。继续支持远程工作体现了信任、包容和适应性，这与参与度和留存率的长期目标是一致的。"
                        }
                    ]
                }
            }
        };

        // --- Templates ---
        const TEMPLATES = {
            en: {
                cost: {
                    polite: "Subject: Discussion regarding work arrangement\n\nHi [Manager Name],\n\nI'm writing to request a continuation of my remote work arrangement. With current inflation, the additional costs of commuting would place a significant strain on my finances, effectively acting as a pay reduction. I am confident I can continue delivering excellent results from home.",
                    firm: "Subject: Remote Work Requirement\n\nHi [Manager Name],\n\nGiven the rising costs of commuting, returning to the office is not financially viable for me at my current compensation level. To maintain my current standard of living and work output, I need to remain remote.",
                    passive: "Subject: Office Attendance\n\nHi [Manager Name],\n\nI'd love to come in, provided the company plans to adjust my salary to match the 15% inflation in gas and parking prices. Until then, my home office is much more 'economically sustainable' for me."
                },
                productivity: {
                    polite: "Subject: maximizing my output\n\nHi [Manager Name],\n\nI've analyzed my productivity metrics and found I deliver 20% more code/work when working from home due to the quiet environment. I would like to prioritize project delivery over physical presence.",
                    firm: "Subject: Work Environment\n\nHi [Manager Name],\n\nThe office environment is too distracting for the deep work my role requires. To meet our Q4 targets, I need to work from home where I can focus without interruptions.",
                    passive: "Subject: Commute vs Work\n\nHi [Manager Name],\n\nI can spend 2 hours driving to the office to sit on Zoom calls with noise-canceling headphones, or I can spend those 2 hours actually working. Let me know which one you prefer for the project timeline."
                },
                care: {
                    polite: "Subject: Flexible Work Arrangement\n\nHi [Manager Name],\n\nI am requesting to continue working remotely to better balance my family care responsibilities. This flexibility allows me to be fully present and productive during work hours without the stress of commute logistics impacting my schedule.",
                    firm: "Subject: Schedule Adjustment\n\nHi [Manager Name],\n\nDue to immediate family care requirements, I cannot commit to a daily commute at this time. I will continue to maintain full productivity from my home office.",
                    passive: "Subject: RTO Logistics\n\nHi [Manager Name],\n\nUnless the office plans to open an on-site daycare/eldercare facility by Monday, my current remote setup is the only way I can ensure I'm online and working during core hours."
                },
                health: {
                    polite: "Subject: Health & Safety Consideration\n\nHi [Manager Name],\n\nFor personal health reasons, I am minimizing exposure to crowded environments. Working remotely has allowed me to maintain perfect attendance and high energy levels. I would like to maintain this arrangement to ensure consistent performance.",
                    firm: "Subject: Medical Accommodation\n\nHi [Manager Name],\n\nTo manage my health effectively and avoid unnecessary risks/stress, I require a remote work arrangement. This is essential for maintaining my long-term productivity and well-being.",
                    passive: "Subject: Sick Days vs Remote Work\n\nHi [Manager Name],\n\nI can come into the office and likely take 10+ sick days this winter due to exposure/stress, or I can work from home and take zero. I assume you prefer the option where the work actually gets done."
                }
            },
            cn: {
                cost: {
                    polite: "主题：关于工作安排的讨论\n\n嗨 [经理名]，\n\n希望能继续保持远程工作的安排。考虑到目前的通胀水平，通勤带来的额外开支对我来说是一笔沉重的负担，这实际上等同于降薪。我相信我在家能继续保持高效产出。",
                    firm: "主题：远程工作需求\n\n嗨 [经理名]，\n\n考虑到通勤成本的飙升，以目前的薪资水平，回到办公室对我来说在经济上是不可行的。为了维持我的生活水准和工作产出，我需要保持远程办公。",
                    passive: "主题：关于去办公室\n\n嗨 [经理名]，\n\n我很乐意去办公室，只要公司打算调整我的薪资来覆盖上涨了15%的油费和停车费。在那之前，我家的办公室对我来说显然更具“经济可持续性”。"
                },
                productivity: {
                    polite: "主题：关于最大化产出\n\n嗨 [经理名]，\n\n分析了我的工作数据后，我发现在家工作的安静环境让我效率提升了20%。为了项目进度，我希望优先考虑产出结果，而不是肉身在场。",
                    firm: "主题：工作环境问题\n\n嗨 [经理名]，\n\n办公室的环境过于嘈杂，无法进行我目前职位所需的深度工作。为了达成Q4目标，我需要在没有干扰的家里工作。",
                    passive: "主题：通勤还是工作\n\n嗨 [经理名]，\n\n我可以花2小时开车去办公室戴着降噪耳机开Zoom会议，或者我可以把这2小时用来实际工作。关于项目进度，请告诉我你更倾向于哪种选择。"
                },
                care: {
                    polite: "主题：灵活工作申请\n\n嗨 [经理名]，\n\n我申请继续远程工作，以便更好地平衡家庭照顾责任。这种灵活性让我能在工作时间内全神贯注，而不用担心通勤物流带来的压力影响我的日程。",
                    firm: "主题：日程调整通知\n\n嗨 [经理名]，\n\n由于紧迫的家庭照顾需求，我目前无法承诺每天通勤。我将继续在家庭办公室保持全负荷工作。",
                    passive: "主题：关于RTO的后勤问题\n\n嗨 [经理名]，\n\n除非公司打算在周一前开设现场托儿所/养老设施，否则目前的远程设置是我能确保在核心工作时间在线工作的唯一方式。"
                },
                health: {
                    polite: "主题：健康与安全考量\n\n嗨 [经理名]，\n\n出于个人健康原因，我正在尽量减少接触拥挤环境。远程工作让我保持了全勤和高精力水平。我希望维持这一安排以确保稳定的绩效。",
                    firm: "主题：健康调整需求\n\n嗨 [经理名]，\n\n为了有效管理我的健康并避免不必要的风险/压力，我需要远程工作安排。这对于维持我长期的生产力和健康至关重要。",
                    passive: "主题：病假 vs 远程工作\n\n嗨 [经理名]，\n\n我可以来办公室，然后因为接触病毒/压力在这个冬天请10多天病假；或者我可以在家工作，保持零缺勤。我假设你更倾向于工作能实际完成的那个选项。"
                }
            }
        };
        // Fallback for missing templates
        const FALLBACK = {
            en: "Subject: RTO Exception Request\n\nHi [Manager],\n\nI am requesting an exemption from the RTO mandate due to personal circumstances. My output remains highest when working remotely.\n\nBest,\n[Name]",
            cn: "主题：RTO 豁免申请\n\n[经理] 您好，\n\n由于个人原因，我申请豁免返回办公室。事实证明，我在远程办公时产出最高。\n\n祝好，\n[名字]"
        };

        // --- State ---
        let currentLang = 'en';

        // --- Logic ---
        function render() {
            const data = CONTENT[currentLang];
            
            // Labels & Static Text
            document.getElementById('lang-label').innerText = data.langBtnLabel;
            document.getElementById('footer-text').innerText = data.footer;
            document.getElementById('tk-back').innerText = data.back;
            document.getElementById('tk-title').innerText = data.title;
            document.getElementById('tk-subtitle').innerText = data.subtitle;

            // Generator UI
            document.getElementById('gen-title').innerText = data.generator.title;
            document.getElementById('gen-desc').innerText = data.generator.desc;
            document.getElementById('lbl-reason').innerText = data.generator.lblReason;
            document.getElementById('lbl-tone').innerText = data.generator.lblTone;
            document.getElementById('txt-generate').innerText = data.generator.btnText;

            // Populate Select Options
            const reasonSel = document.getElementById('sel-reason');
            const toneSel = document.getElementById('sel-tone');
            
            // Save current selection to restore after re-render
            const currReason = reasonSel.value;
            const currTone = toneSel.value;

            reasonSel.innerHTML = '';
            data.generator.reasons.forEach(r => {
                const opt = document.createElement('option');
                opt.value = r.val;
                opt.innerText = r.text;
                reasonSel.appendChild(opt);
            });
            if(currReason) reasonSel.value = currReason;

            toneSel.innerHTML = '';
            data.generator.tones.forEach(t => {
                const opt = document.createElement('option');
                opt.value = t.val;
                opt.innerText = t.text;
                toneSel.appendChild(opt);
            });
            if(currTone) toneSel.value = currTone;

            // Database UI
            document.getElementById('db-title').innerText = data.database.title;
            document.getElementById('db-subtitle').innerText = data.database.subtitle;

            // Render Accordions
            const accContainer = document.getElementById('accordion-container');
            accContainer.innerHTML = '';
            data.database.items.forEach(item => {
                const html = `
                    <div class="border border-gray-200 rounded-lg overflow-hidden">
                        <div class="bg-gray-50 px-4 py-3 font-semibold text-gray-800 cursor-pointer hover:bg-gray-100 transition-colors flex justify-between items-center group" onclick="toggleAccordion(this)">
                            <span>${item.title}</span>
                            <svg class="w-4 h-4 text-gray-400 transform group-hover:rotate-180 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </div>
                        <div class="p-4 bg-white text-gray-600 text-sm hidden">
                            ${item.body}
                        </div>
                    </div>
                `;
                accContainer.insertAdjacentHTML('beforeend', html);
            });
        }

        // --- Functions ---
        function toggleAccordion(header) {
            const body = header.nextElementSibling;
            body.classList.toggle('hidden');
        }

        function generateEmail() {
            const reason = document.getElementById('sel-reason').value;
            const tone = document.getElementById('sel-tone').value;
            
            let text = "";
            try {
                text = TEMPLATES[currentLang][reason][tone];
            } catch(e) {
                // If specific combo missing, use fallback or generic
                text = FALLBACK[currentLang];
            }
            if(!text) text = FALLBACK[currentLang];

            const output = document.getElementById('output-email');
            output.value = text;
        }

        // --- Events ---
        document.getElementById('lang-toggle').addEventListener('click', () => {
            currentLang = currentLang === 'en' ? 'cn' : 'en';
            render();
            // Re-generate email if there's text in the box to switch language
            const output = document.getElementById('output-email');
            if (output.value && !output.value.startsWith("Select")) {
                generateEmail();
            }
        });

        document.getElementById('btn-generate').addEventListener('click', generateEmail);

        document.getElementById('btn-copy').addEventListener('click', () => {
            const output = document.getElementById('output-email');
            output.select();
            document.execCommand('copy');
            // Visual feedback
            const originalColor = document.getElementById('btn-copy').innerHTML;
            document.getElementById('btn-copy').innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>`;
            setTimeout(() => {
                 document.getElementById('btn-copy').innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>`;
            }, 1500);
        });

        // --- Init ---
        render();

    </script>
</body>
</html>